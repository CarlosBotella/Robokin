<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurante - Mesa</title>
    <link rel="stylesheet" href="../css/mesa.css">
</head>

<body onload="comprobarsesion2()">

    <div class="container">
        <h1>Número de Mesa</h1>
        <form>
            <select id="mesa" name="mesa" required>
                <option value="" disabled selected>Seleccione el número de mesa</option>

            </select>
            <button type="button" id="confirmarButton">Confirmar</button>
        </form>
        <button id="backButton" onclick="window.location.href='option.html';">Regresar</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const confirmarButton = document.getElementById('confirmarButton');

            confirmarButton.addEventListener('click', function () {
                var mesa = document.getElementById("mesa").value;

                // Convertir el valor del campo a número
                var numeroMesa = parseInt(mesa);

                if (!isNaN(numeroMesa)) {
                    // Redireccionar a productos.html
                    window.location.href = "productos.html?nmesa=" + numeroMesa;
                } else {
                    // Manejo de error si el valor no es un número válido
                    alert("Por favor, seleccione un número de mesa válido.");
                }
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('../api/listamesas.php')
                .then(response => response.json())
                .then(data => {
                    const selectMesa = document.getElementById('mesa');

                    data.forEach(mesa => {
                        const option = document.createElement('option');
                        option.value = mesa.id_mesa;
                        option.textContent = `Mesa ${mesa.id_mesa}`;
                        selectMesa.appendChild(option);
                    });
                })
                .catch(error => console.error('Hubo un error:', error));
        })
    </script>

    <script src="../js/server.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</body>

</html>